<!DOCTYPE html>
<html>
   <head>
      <meta charset="utf-8">
      <title></title>
      <!-- <script type="text/javascript" src="http://requirejs.org/docs/release/2.2.0/minified/require.js"></script> -->
      <script type="text/javascript" src="./realm.js"></script>
   </head>
   <body>
      <script>
         
         

         /**
 * require(function(a){ })
 * require(function(){}, {local : 1})
 * require([], function(){}, {local : 1})
 * require(['a', 'b'], function(mystuff){ })
 * require('method', function(mystuff){ })
 * require('method', function(mystuff){ }, { local : 1})
 
 */

        
         realm.module('pukka', [], () => {
             return new Promise((resolve)=>{
                 return resolve("hahaha pukka")
             });
         });

         realm.module('sukka', [ 'pukka'], (pukka) => {
             return {
                 pukkaResolved : pukka,
                 
                 sukka : 1
             }
         });

         realm.module('foo', ['pukka'], (pukka) => {
             
             return new Promise(x => x('pukka') );
            
             
         });
         
         realm.ts_module('ts_bar', ['foo'], function(exports, require){
             var f = require('foo');
             console.log("AAAA", f);
             exports.poo = 'this is poo';
         });

         realm.module('ooo', ['ts_bar'], function(ts_bar){
             console.log("ts_bar is", ts_bar);
         })

         realm.require((ooo, sukka) => {
            
            return 2;
         }, {
             sukka : 1
         }).catch(function(e){
             console.error(e.stack)
         })
         
      </script>
   </body>
</html>
